<%- include("partials/header.ejs") %>

    <div class="">
        <div class="cloud">
            <img class="cloud1 animate__animated animate__bounce animate__infinite	infinite" src="images/Cloud-PNG.png" alt="">
            <img class="cloud2 animate__animated animate__bounce animate__infinite	infinite" src="images/Clouds-PNG.png" alt="">
        </div>
        <% if (locals.result) { %>
            <div class="container report">
                <div class="row">
                    <div class="col">
                        <h2 class="location-text"><%= result.current.condition.text %></h2>
                        <img src="<%= result.current.condition.icon %>" alt="">
                        <h4 class="location"><%= result.location.region %></h4>
                        <h4 class="location"><%= result.location.country %></h4>
                    </div>
                    <div class="col">
                        <div class="row">
                            <div class="col">
                                <div class="card">
                                    <h4><i class="fa-solid fa-droplet" style="color: #FFD43B;"></i> Humidity</h4>
                                    <h4 class="data"><%= result.current.humidity %> %</h4>
                                </div>
                                <div class="card">
                                    <h4><i class="fa-regular fa-wind" style="color: #FFD43B;"></i> Wind</h4>
                                    <h4 class="data"><%= result.current.wind_mph %>mph</h4>
                                </div>
                            </div>
                            <div class="col">
                                <div class="card">
                                    <h4><i class="fa-solid fa-temperature-three-quarters" style="color: #FFD43B;"></i> Temp</h4>
                                    <h4 class="data"><%= result.current.temp_c %>&deg;C</h4>
                                </div>
                                <div class="card">
                                    <h4><i class="fa-solid fa-temperature-three-quarters" style="color: #FFD43B;"></i> Feels like</h4>
                                    <h4 class="data"><%= result.current.feelslike_c %>&deg;C</h4>
                                </div>
                            </div>
                        </div>
                
                    </div>
                </div>
                <div class="row row2">
                    <div class="col">
                        <div class="card date-map">
                            <h1><i class="fa-solid fa-calendar-days" style="color: #FFD43B;"></i> <%= result.location.localtime %></h1>
                            <div class="row extra">
                                <div class="col">
                                    <div class="card">
                                        <h5> Wind direction</h5>
                                        <h4 class="data"><%= result.current.wind_dir %></h4>
                                    </div>
                                </div>
                                <div class="col">
                                    <div class="card">
                                        <h5> Wind degree</h5>
                                        <h4 class="data"><%= result.current.wind_degree %></h4>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                    </div>
                    <div class="col">
                        <div class="card date-map">
                            <% var radius = 3 %>
                            <% var minLat = result.location.lat - radius %>
                            <% var maxLat = result.location.lat + radius %>
                            <% var minLng = result.location.lon - radius %>
                            <% var maxLng = result.location.lon + radius %>
                            <iframe class="map" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="https://www.openstreetmap.org/export/embed.html?bbox=<%=minLng%>,<%=minLat%>,<%=maxLng%>,<%=maxLat%>&marker=<%=result.location.lat%>,<%=result.location.lon%>&layers=ND"></iframe>
                        </div>
                    </div>
                </div>
                
            </div>
            
        <% } else { %>
            <div class="container box">
                <form class="" action="/report" method="post">
                    <div class="h1">
                        <h1 class="h-text">WeatherCast</h1>
                    </div>
                    <div class="mb-3">
                        <label for="cityName" class="form-label">City Name</label>
                        <input type="text" name="city" class="form-control" id="cityName" aria-describedby="emailHelp">
                      </div>
                      <div class="mb-3">
                        <label for="country" class="form-label">Country</label>
                        <input type="text" name="country" class="form-control" id="country">
                      </div>
                      <div class="sub">
                        <button type="submit" class="btn btn-primary">Submit</button>
                      </div>   
                </form>
            </div>
        <% }%>
        
    </div>  
</body>

<%- include("partials/footer.ejs") %>